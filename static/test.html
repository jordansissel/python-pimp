<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<title>Dynamic Sexiness (in the eye)</title>
	<link rel="stylesheet" type="text/css" href="/static/style.css" />
	<script src="/static/js/accelimation.js" type="text/javascript" />
	<script src="/static/DP_Debug.js" type="text/javascript" />
	<script src="/static/ajam.js" type="text/javascript" />
	<script src="/static/effects.js" type="text/javascript" />

	<script>
		<![CDATA[
		function findPosX(obj) {
			var curleft = 0;
			if (obj.offsetParent)
			{
				while (obj.offsetParent)
				{
					curleft += obj.offsetLeft
						obj = obj.offsetParent;
				}
			}
			else if (obj.x)
				curleft += obj.x;
			return curleft;
		}

		function findPosY(obj) {
			var curtop = 0;
			if (obj.offsetParent)
			{
				while (obj.offsetParent)
				{
					curtop += obj.offsetTop
						obj = obj.offsetParent;
				}
			}
			else if (obj.y)
				curtop += obj.y;
			return curtop;
		}


		function blah() {
			for (var x = 1; x < 10; x++) {
				foo("test" + x, x);
			}
		}
		function foo(bar, i) {
			var a = document.getElementById(bar);
			if (!a) return;

			a.style.width="0px";
			a.style.height="0px";
			a.style.position="absolute";
			a.style.backgroundColor="green";
			a.style.top = "100px"; //(75 * i) + "px";
			a.style.left = (100 * i) + "px";
			//setTimeout(function() { zoom(a, i) }, (i - 1) * 100);
			setTimeout(function() { 
						  var b = document.getElementById(bar);
						  Effect.Zoom(b, 300, { 'appear': 1,"width": 50, "height": 50 }) 
						  }, 100 * i);
			//Effect.Zoom(a, 300, { "width": 50, "height": 50 });
		}

		function zoom(el, i) {
			zoompart(el, "width", 50, 1);
			zoompart(el, "height", 50, 1);
			el.style.opacity = 0;
			Effect.Appear(el, 1000);
			//zoompart(el, "top", -25, 0);
			//zoompart(el, "left", -25, 0);
		}

		function zoompart(el, prop, val, o) {
			var cur = el.style[prop];
			var dest;
			if (o)
				dest = val;
			else
				dest = parseInt(cur) + val

			var m = new Accelimation(el.style, prop, dest + (val * .2), 300, 2);
			m.onend = function() { 
				var x;
				x = new Accelimation(el.style, prop, dest, 300, 1);
				x.onend = function() {};
				x.start();
			}
			m.start();

			/* Modulate the position, too */
			var oprop = (prop == "width") ? "left" : "top";
			var coordfunc = (oprop == "left") ? findPosX : findPosY;
			var coord = coordfunc(el);
			var coorddest = coord - (val / 2);
			var cdest1 = coorddest - ((val / 2) * .2)

			//document.body.appendChild(mktext(coord + " -> " + coorddest + " (" + cdest1 + ") /// "));

			var cm = new Accelimation(el.style, oprop, cdest1, 300, 2);
			cm.onend = function() { 
				var x;
				x = new Accelimation(el.style, oprop, coorddest, 300, 1);
				x.onend = function() {};
				x.start();
			}
			cm.start();

		}
]]>
	</script>
</head>
<body onclick="blah()">

<div> Click on the page to activate demo </div>

<div>
<img src="http://www.csh.rit.edu/~psionic/images/lj/kenya.png" id="test1" />
<img src="http://www.csh.rit.edu/~psionic/images/lj/dewie.png" id="test2" />
<img src="http://www.csh.rit.edu/~psionic/images/lj/zerowing.png" id="test3" />
<img src="http://www.csh.rit.edu/~psionic/images/sloth1.jpg" id="test4" />
<img src="http://www.csh.rit.edu/~psionic/images/lj/kenya.png" id="test5" />
<img src="http://www.csh.rit.edu/~psionic/images/lj/dewie.png" id="test6" />
<img src="http://www.csh.rit.edu/~psionic/images/lj/zerowing.png" id="test7" />
<img src="http://www.csh.rit.edu/~psionic/images/sloth1.jpg" id="test8" />
</div>

</body>
</html>
